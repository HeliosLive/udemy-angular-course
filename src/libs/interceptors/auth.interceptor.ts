import { Injectable } from "@angular/core";
import {
  HttpRequest,
  HttpHandler,
  HttpEvent,
  HttpInterceptor,
} from "@angular/common/http";
import { Observable } from "rxjs";
import { UserService } from "../services/user.service";

@Injectable()
export class AuthInterceptor implements HttpInterceptor {
  constructor(private userService: UserService) {}

  intercept(
    request: HttpRequest<unknown>,
    next: HttpHandler
  ): Observable<HttpEvent<unknown>> {
    if (request.url === "https://udemy-nestjs-course.herokuapp.com/api/login") {
      return next.handle(request);
    } else {
      request = request.clone({
        setHeaders: {
          Authorization: `Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjp7InJvbGVzIjpbeyJfaWQiOiI1ZmQ2OGRiZmZhNmVkMTAwMTdkMDNhMTIiLCJuYW1lIjoidGVzdCByb2xlIDIiLCJhdWRpdCI6eyJhY3RpdmUiOnRydWUsImNyZWF0ZWRCeSI6IkFkbWluIiwiY3JlYXRlZERhdGUiOiIyMDIwLTEyLTEzVDIxOjU1OjExLjA0NVoifSwiX192IjowfSx7Il9pZCI6IjVmZDY4ZTgyZmE2ZWQxMDAxN2QwM2ExMyIsIm5hbWUiOiJ0ZXN0IHJvbGUgMyIsImF1ZGl0Ijp7ImFjdGl2ZSI6dHJ1ZSwiY3JlYXRlZEJ5IjoiQWRtaW4iLCJjcmVhdGVkRGF0ZSI6IjIwMjAtMTItMTNUMjE6NTg6MjYuNTI2WiJ9LCJfX3YiOjB9LHsiX2lkIjoiNWZlMGI2NWUwNTNjMGEwMDE3MTA0NGJjIiwibmFtZSI6IkFkbWluIiwiYXVkaXQiOnsiYWN0aXZlIjp0cnVlLCJjcmVhdGVkQnkiOiJBZG1pbiIsImNyZWF0ZWREYXRlIjoiMjAyMC0xMi0yMVQxNDo1MToxMC4wMzhaIn0sIl9fdiI6MH1dLCJfaWQiOiI1ZmRjOWE3NjY5ZDM2ODAwMTc1N2M5ZTgiLCJuYW1lIjoiQWhtZXQiLCJzdXJuYW1lIjoiQXlkxLFuIiwiZW1haWwiOiJhaG1ldHR0YXlkaW5AeWFuZGV4LmNvbSIsImJpcnRoRGF5IjoiMTk5My0wNC0yNFQxMTowMzowMy42MTdaIiwicGFzc3dvcmQiOiIkMmIkMTAkNXNIZTdOdzlFVEdINjlzVi9sNUd0dWwyWUF3THFuQ1lEVUlpclhoT1ZIU2gxWlk2aGdpWHkiLCJhdWRpdCI6eyJhY3RpdmUiOnRydWUsImNyZWF0ZWRCeSI6IkFkbWluIiwiY3JlYXRlZERhdGUiOiIyMDIwLTEyLTE4VDEyOjAzOjAyLjg1NFoifSwiX192IjowfSwicGVybWlzc2lvbnMiOlt7Il9pZCI6IjVmZjg0NDkzOTgzZWU4MmMyNDIzMGVmMyIsIm5hbWUiOiJnZXQ6dXNlciIsImF1ZGl0Ijp7ImFjdGl2ZSI6dHJ1ZSwiY3JlYXRlZEJ5IjoiQWRtaW4iLCJjcmVhdGVkRGF0ZSI6IjIwMjEtMDEtMDhUMTE6NDA6MDMuMzQ5WiJ9LCJfX3YiOjB9LHsiX2lkIjoiNWZmODQ0OWU5ODNlZTgyYzI0MjMwZWY0IiwibmFtZSI6ImdldDp1c2VyOmlkIiwiYXVkaXQiOnsiYWN0aXZlIjp0cnVlLCJjcmVhdGVkQnkiOiJBZG1pbiIsImNyZWF0ZWREYXRlIjoiMjAyMS0wMS0wOFQxMTo0MDoxNC40NjFaIn0sIl9fdiI6MH0seyJfaWQiOiI1ZmY4NDQ4ODk4M2VlODJjMjQyMzBlZjIiLCJuYW1lIjoicHV0OnVzZXIiLCJhdWRpdCI6eyJhY3RpdmUiOnRydWUsImNyZWF0ZWRCeSI6IkFkbWluIiwiY3JlYXRlZERhdGUiOiIyMDIxLTAxLTA4VDExOjM5OjUyLjUwNloifSwiX192IjowfSx7Il9pZCI6IjVmZjg2YjY3OWQyZTVmM2Y1NGU5MWJmOSIsIm5hbWUiOiJwb3N0OnJvbGUiLCJhdWRpdCI6eyJhY3RpdmUiOnRydWUsImNyZWF0ZWRCeSI6IkFkbWluIiwiY3JlYXRlZERhdGUiOiIyMDIxLTAxLTA4VDE0OjI1OjQzLjQzM1oifSwiX192IjowfSx7Il9pZCI6IjVmZjg2YjZmOWQyZTVmM2Y1NGU5MWJmYSIsIm5hbWUiOiJnZXQ6cm9sZSIsImF1ZGl0Ijp7ImFjdGl2ZSI6dHJ1ZSwiY3JlYXRlZEJ5IjoiQWRtaW4iLCJjcmVhdGVkRGF0ZSI6IjIwMjEtMDEtMDhUMTQ6MjU6NTEuMjc2WiJ9LCJfX3YiOjB9LHsiX2lkIjoiNWZmODZiNzg5ZDJlNWYzZjU0ZTkxYmZiIiwibmFtZSI6ImdldDpyb2xlOmlkIiwiYXVkaXQiOnsiYWN0aXZlIjp0cnVlLCJjcmVhdGVkQnkiOiJBZG1pbiIsImNyZWF0ZWREYXRlIjoiMjAyMS0wMS0wOFQxNDoyNjowMC4zOTlaIn0sIl9fdiI6MH0seyJfaWQiOiI1ZmY4NmI4MTlkMmU1ZjNmNTRlOTFiZmMiLCJuYW1lIjoicHV0OnJvbGUiLCJhdWRpdCI6eyJhY3RpdmUiOnRydWUsImNyZWF0ZWRCeSI6IkFkbWluIiwiY3JlYXRlZERhdGUiOiIyMDIxLTAxLTA4VDE0OjI2OjA5LjI5MVoifSwiX192IjowfSx7Il9pZCI6IjVmZjg2Yjg1OWQyZTVmM2Y1NGU5MWJmZCIsIm5hbWUiOiJkZWxldGU6cm9sZSIsImF1ZGl0Ijp7ImFjdGl2ZSI6dHJ1ZSwiY3JlYXRlZEJ5IjoiQWRtaW4iLCJjcmVhdGVkRGF0ZSI6IjIwMjEtMDEtMDhUMTQ6MjY6MTMuMzIxWiJ9LCJfX3YiOjB9LHsiX2lkIjoiNWZmODZiOTA5ZDJlNWYzZjU0ZTkxYmZlIiwibmFtZSI6ImRlbGV0ZTpkYXRhIiwiYXVkaXQiOnsiYWN0aXZlIjp0cnVlLCJjcmVhdGVkQnkiOiJBZG1pbiIsImNyZWF0ZWREYXRlIjoiMjAyMS0wMS0wOFQxNDoyNjoyNC43NjFaIn0sIl9fdiI6MH0seyJfaWQiOiI1ZmY4NmI5NDlkMmU1ZjNmNTRlOTFiZmYiLCJuYW1lIjoicHV0OmRhdGEiLCJhdWRpdCI6eyJhY3RpdmUiOnRydWUsImNyZWF0ZWRCeSI6IkFkbWluIiwiY3JlYXRlZERhdGUiOiIyMDIxLTAxLTA4VDE0OjI2OjI4LjM4MVoifSwiX192IjowfSx7Il9pZCI6IjVmZjg2Yjk4OWQyZTVmM2Y1NGU5MWMwMCIsIm5hbWUiOiJnZXQ6ZGF0YSIsImF1ZGl0Ijp7ImFjdGl2ZSI6dHJ1ZSwiY3JlYXRlZEJ5IjoiQWRtaW4iLCJjcmVhdGVkRGF0ZSI6IjIwMjEtMDEtMDhUMTQ6MjY6MzIuODEyWiJ9LCJfX3YiOjB9LHsiX2lkIjoiNWZmODZiOWM5ZDJlNWYzZjU0ZTkxYzAxIiwibmFtZSI6InBvc3Q6ZGF0YSIsImF1ZGl0Ijp7ImFjdGl2ZSI6dHJ1ZSwiY3JlYXRlZEJ5IjoiQWRtaW4iLCJjcmVhdGVkRGF0ZSI6IjIwMjEtMDEtMDhUMTQ6MjY6MzYuNDMxWiJ9LCJfX3YiOjB9LHsiX2lkIjoiNWZmODZiYTE5ZDJlNWYzZjU0ZTkxYzAyIiwibmFtZSI6ImdldDpkYXRhOmlkIiwiYXVkaXQiOnsiYWN0aXZlIjp0cnVlLCJjcmVhdGVkQnkiOiJBZG1pbiIsImNyZWF0ZWREYXRlIjoiMjAyMS0wMS0wOFQxNDoyNjo0MS4xNThaIn0sIl9fdiI6MH0seyJfaWQiOiI1ZmY4NmJhNDlkMmU1ZjNmNTRlOTFjMDMiLCJuYW1lIjoiZ2V0OmRhdGE6YWxsIiwiYXVkaXQiOnsiYWN0aXZlIjp0cnVlLCJjcmVhdGVkQnkiOiJBZG1pbiIsImNyZWF0ZWREYXRlIjoiMjAyMS0wMS0wOFQxNDoyNjo0NC43NDlaIn0sIl9fdiI6MH0seyJfaWQiOiI1ZmY4NmJhZjlkMmU1ZjNmNTRlOTFjMDQiLCJuYW1lIjoiZ2V0OmxvY2F0aW9uIiwiYXVkaXQiOnsiYWN0aXZlIjp0cnVlLCJjcmVhdGVkQnkiOiJBZG1pbiIsImNyZWF0ZWREYXRlIjoiMjAyMS0wMS0wOFQxNDoyNjo1NS42NzJaIn0sIl9fdiI6MH0seyJfaWQiOiI1ZmY4NmJiNDlkMmU1ZjNmNTRlOTFjMDUiLCJuYW1lIjoiZ2V0OmxvY2F0aW9uOmlkIiwiYXVkaXQiOnsiYWN0aXZlIjp0cnVlLCJjcmVhdGVkQnkiOiJBZG1pbiIsImNyZWF0ZWREYXRlIjoiMjAyMS0wMS0wOFQxNDoyNzowMC42NzBaIn0sIl9fdiI6MH0seyJfaWQiOiI1ZmY4NmJiYjlkMmU1ZjNmNTRlOTFjMDYiLCJuYW1lIjoicG9zdDpsb2NhdGlvbiIsImF1ZGl0Ijp7ImFjdGl2ZSI6dHJ1ZSwiY3JlYXRlZEJ5IjoiQWRtaW4iLCJjcmVhdGVkRGF0ZSI6IjIwMjEtMDEtMDhUMTQ6Mjc6MDcuNDUwWiJ9LCJfX3YiOjB9LHsiX2lkIjoiNWZmODZiYzc5ZDJlNWYzZjU0ZTkxYzA3IiwibmFtZSI6InB1dDpsb2NhdGlvbiIsImF1ZGl0Ijp7ImFjdGl2ZSI6dHJ1ZSwiY3JlYXRlZEJ5IjoiQWRtaW4iLCJjcmVhdGVkRGF0ZSI6IjIwMjEtMDEtMDhUMTQ6Mjc6MTkuMjExWiJ9LCJfX3YiOjB9LHsiX2lkIjoiNWZmODZiY2E5ZDJlNWYzZjU0ZTkxYzA4IiwibmFtZSI6ImRlbGV0ZTpsb2NhdGlvbiIsImF1ZGl0Ijp7ImFjdGl2ZSI6dHJ1ZSwiY3JlYXRlZEJ5IjoiQWRtaW4iLCJjcmVhdGVkRGF0ZSI6IjIwMjEtMDEtMDhUMTQ6Mjc6MjIuNzMxWiJ9LCJfX3YiOjB9LHsiX2lkIjoiNWZmODZiZDQ5ZDJlNWYzZjU0ZTkxYzA5IiwibmFtZSI6ImRlbGV0ZTpwZXJtaXNzaW9uIiwiYXVkaXQiOnsiYWN0aXZlIjp0cnVlLCJjcmVhdGVkQnkiOiJBZG1pbiIsImNyZWF0ZWREYXRlIjoiMjAyMS0wMS0wOFQxNDoyNzozMi42MzZaIn0sIl9fdiI6MH0seyJfaWQiOiI1ZmY4NmJkODlkMmU1ZjNmNTRlOTFjMGEiLCJuYW1lIjoicHV0OnBlcm1pc3Npb24iLCJhdWRpdCI6eyJhY3RpdmUiOnRydWUsImNyZWF0ZWRCeSI6IkFkbWluIiwiY3JlYXRlZERhdGUiOiIyMDIxLTAxLTA4VDE0OjI3OjM2LjcwM1oifSwiX192IjowfSx7Il9pZCI6IjVmZjg2YmRiOWQyZTVmM2Y1NGU5MWMwYiIsIm5hbWUiOiJwb3N0OnBlcm1pc3Npb24iLCJhdWRpdCI6eyJhY3RpdmUiOnRydWUsImNyZWF0ZWRCeSI6IkFkbWluIiwiY3JlYXRlZERhdGUiOiIyMDIxLTAxLTA4VDE0OjI3OjM5Ljk5NloifSwiX192IjowfSx7Il9pZCI6IjVmZjg2YmRlOWQyZTVmM2Y1NGU5MWMwYyIsIm5hbWUiOiJnZXQ6cGVybWlzc2lvbiIsImF1ZGl0Ijp7ImFjdGl2ZSI6dHJ1ZSwiY3JlYXRlZEJ5IjoiQWRtaW4iLCJjcmVhdGVkRGF0ZSI6IjIwMjEtMDEtMDhUMTQ6Mjc6NDIuMzI5WiJ9LCJfX3YiOjB9LHsiX2lkIjoiNWZmODZiZTE5ZDJlNWYzZjU0ZTkxYzBkIiwibmFtZSI6ImdldDpwZXJtaXNzaW9uOmlkIiwiYXVkaXQiOnsiYWN0aXZlIjp0cnVlLCJjcmVhdGVkQnkiOiJBZG1pbiIsImNyZWF0ZWREYXRlIjoiMjAyMS0wMS0wOFQxNDoyNzo0NS41MzZaIn0sIl9fdiI6MH0seyJfaWQiOiI1ZmY4NmJlODlkMmU1ZjNmNTRlOTFjMGUiLCJuYW1lIjoiZ2V0OnNlbnNvcjppZCIsImF1ZGl0Ijp7ImFjdGl2ZSI6dHJ1ZSwiY3JlYXRlZEJ5IjoiQWRtaW4iLCJjcmVhdGVkRGF0ZSI6IjIwMjEtMDEtMDhUMTQ6Mjc6NTIuNDIzWiJ9LCJfX3YiOjB9LHsiX2lkIjoiNWZmODZiZWI5ZDJlNWYzZjU0ZTkxYzBmIiwibmFtZSI6ImdldDpzZW5zb3IiLCJhdWRpdCI6eyJhY3RpdmUiOnRydWUsImNyZWF0ZWRCeSI6IkFkbWluIiwiY3JlYXRlZERhdGUiOiIyMDIxLTAxLTA4VDE0OjI3OjU1LjE3OFoifSwiX192IjowfSx7Il9pZCI6IjVmZjg2YmVlOWQyZTVmM2Y1NGU5MWMxMCIsIm5hbWUiOiJwdXQ6c2Vuc29yIiwiYXVkaXQiOnsiYWN0aXZlIjp0cnVlLCJjcmVhdGVkQnkiOiJBZG1pbiIsImNyZWF0ZWREYXRlIjoiMjAyMS0wMS0wOFQxNDoyNzo1OC44MDVaIn0sIl9fdiI6MH0seyJfaWQiOiI1ZmY4NmJmMjlkMmU1ZjNmNTRlOTFjMTEiLCJuYW1lIjoicG9zdDpzZW5zb3IiLCJhdWRpdCI6eyJhY3RpdmUiOnRydWUsImNyZWF0ZWRCeSI6IkFkbWluIiwiY3JlYXRlZERhdGUiOiIyMDIxLTAxLTA4VDE0OjI4OjAyLjc3NFoifSwiX192IjowfSx7Il9pZCI6IjVmZjg2YmZhOWQyZTVmM2Y1NGU5MWMxMiIsIm5hbWUiOiJkZWxldGU6c2Vuc29yIiwiYXVkaXQiOnsiYWN0aXZlIjp0cnVlLCJjcmVhdGVkQnkiOiJBZG1pbiIsImNyZWF0ZWREYXRlIjoiMjAyMS0wMS0wOFQxNDoyODoxMC4yMDdaIn0sIl9fdiI6MH0seyJfaWQiOiI1ZmY4NmMwMjlkMmU1ZjNmNTRlOTFjMTMiLCJuYW1lIjoiZGVsZXRlOnVzZXIiLCJhdWRpdCI6eyJhY3RpdmUiOnRydWUsImNyZWF0ZWRCeSI6IkFkbWluIiwiY3JlYXRlZERhdGUiOiIyMDIxLTAxLTA4VDE0OjI4OjE4LjkwN1oifSwiX192IjowfSx7Il9pZCI6IjVmZjg2YzE1OWQyZTVmM2Y1NGU5MWMxNCIsIm5hbWUiOiJwb3N0OnVzZXIiLCJhdWRpdCI6eyJhY3RpdmUiOnRydWUsImNyZWF0ZWRCeSI6IkFkbWluIiwiY3JlYXRlZERhdGUiOiIyMDIxLTAxLTA4VDE0OjI4OjM3LjUzNFoifSwiX192IjowfV0sImlhdCI6MTYxMDQ0NjM1MH0.THD5iuLcIaJhyQlbX77k8rjALpHmka9zYKtDCxt1G4A`,
        }, // API tarafÄ±nda CDN keyleri eksik
        // Authorization: `Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjp7InJvbGVzIjpbeyJuYW1lIjoiYWRtaW4ifSx7Im5hbWUiOiJjYWxsLWNlbnRlciJ9LHsibmFtZSI6InJlcGFpcm1hbiJ9XSwiZ3JvdXBzIjpbeyJuYW1lIjoibWFuYWdlciJ9XSwiX2lkIjoiNWUxYWYzNWE5OWJhNGUyMDA3YjE1NjQxIiwibmFtZSI6ImFobWV0Iiwic3VybmFtZSI6ImF5ZMSxbiIsImVtYWlsIjoiYWhtZXR0dGF5ZGluQHlhbmRleC5jb20iLCJwYXNzd29yZCI6IiQyYiQxMCRibDdVMnp2S093eDM0UW5HM2piMUJlMHVNYlVSZHZWNWt4NmFCOGVkYXRCZ3MzT1lwTEZKTyIsImJpcnRoRGF5IjoiMTk5My0wNC0yNFQyMTowMDowMC4wMDBaIiwiX192IjowfSwiaWF0IjoxNTkzOTQzNDY5fQ.AhzLqdgn3GDKKeDNfjZuBYTHjB9DAur8ZPAbXQ31NfY`
      });
      return next.handle(request);
    }
  }
}
